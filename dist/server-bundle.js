!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=require("rxjs/operators")},function(e,t){e.exports=require("rxjs")},function(e,t){e.exports=require("p2")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("socket.io")},function(e,t){e.exports=require("cors")},function(e,t,n){"use strict";n.r(t);var r,o=process.env.PORT||5e3,i="http://localhost:"+o,u=1e3/30,c=800,f=50,a=50,l=n(1),s=n(0),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=n(2),b=3,v=["#fea49f","#51d0de","#bf4aa8","#F7882F","#F7C331","#1561ad","#1dbab4","#fc5226","#eb1736","#8bf0ba"],y={},h={},g={},j=new d.World({gravity:[0,0]});function x(){return r||(r=Object(l.interval)(u).pipe(Object(s.filter)((function(){return Object.keys(y).length>0})),Object(s.map)((function(){return function(){for(var e=0,t=Object.keys(g);e<t.length;e++){var n=t[e],r=g[n],o=y[n],i=h[n],l=o.x,s=o.y;r.left&&o.x>f&&(l-=b),r.up&&o.y>f&&(s-=b),r.right&&o.x<c-f&&(l+=b),r.down&&o.y<c-a&&(s+=b),i.position=[l,s],console.log(i.position)}j.step(u);for(var p=0,d=Object.keys(g);p<d.length;p++){n=d[p];var v=h[n].position;l=v[0],s=v[1];y[n].x=l,y[n].y=s}return y}()})),Object(s.share)()))}function O(e,t){y[t]=p(p({},{x:m(f,c-f),y:m(a,c-a)}),{color:M(),name:e}),g[t]={up:!1,down:!1,left:!1,right:!1};var n=new d.Body({mass:5,position:[y[t].x,y[t].y]}),r=new d.Circle({radius:f});return n.addShape(r),j.addBody(n),h[t]=n,y[t]}function m(e,t){return Math.floor(Math.random()*(1+t-e))+e}function M(){var e,t=v.filter((function(e){for(var t=0,n=Object.keys(y);t<n.length;t++){var r=n[t];if(y[r].color===e)return!1}return!0}));0===t.length&&(t=v);for(var n=0;n<t.length;n++)e=t[Math.floor(Math.random()*t.length)];return e}var S=n(3)(),q=n(4).createServer(S),w=n(5)(q),P=n(6);S.use(P()),S.get("/",(function(e,t){t.send("<h1>Server</h1>")})),w.on("connection",(function(e){e.on("join",(function(t){O(t,e.id)&&(w.to(""+e.id).emit("joined",!0),x().subscribe((function(t){return e.emit("state",t)})))})),e.on("movement",(function(t){var n,r;n=e.id,r=t,y[n]&&(g[n]=r)})),e.on("disconnect",(function(){var t;t=e.id,delete y[t],delete g[t],delete h[t]}))})),q.listen(o,(function(){console.log("listening on "+i)}))}]);